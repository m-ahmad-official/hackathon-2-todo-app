1. Get the application URL by running these commands:
{{- if .Values.ingress.enabled }}
{{- range $host := .Values.ingress.hosts }}
{{- range .paths }}
  http{{ if $.Values.ingress.tls }}s{{ end }}://{{ $host.host }}{{ .path }}
{{- end }}
{{- end }}
{{- else }}
   Since we're deploying on Minikube with separate frontend and backend services:

   Frontend:
   --------
   kubectl port-forward service/{{ include "todo-chat.fullname" . }}-frontend 3000:{{ .Values.app.frontend.service.port }} &

   Backend:
   --------
   kubectl port-forward service/{{ include "todo-chat.fullname" . }}-backend 8000:{{ .Values.app.backend.service.port }} &

   OR use Minikube service command:

   Frontend:
   ----------
   minikube service {{ include "todo-chat.fullname" . }}-frontend --url

   Backend:
   ----------
   minikube service {{ include "todo-chat.fullname" . }}-backend --url

   Once you have the URLs:

   Frontend URL: http://localhost:3000 (or the URL returned by Minikube)
   Backend URL: http://localhost:8000 (or the URL returned by Minikube)

   The frontend will proxy API requests to /api which routes to the backend service.

{{- end }}

2. To check deployment status:
   kubectl get deployments,pods,services

3. To view logs:
   kubectl logs -f deployment/{{ include "todo-chat.fullname" . }}-frontend
   kubectl logs -f deployment/{{ include "todo-chat.fullname" . }}-backend

4. To cleanup:
   kubectl delete deployment {{ include "todo-chat.fullname" . }}-frontend {{ include "todo-chat.fullname" . }}-backend
   kubectl delete service {{ include "todo-chat.fullname" . }}-frontend {{ include "todo-chat.fullname" . }}-backend

IMPORTANT: Before deploying, ensure:
- Your Docker images (todo-frontend:latest and todo-backend:latest) are available in Minikube's Docker daemon
  OR update the image.repository values to point to your container registry
- The Neon PostgreSQL database URL is correctly set in values.yaml (it's pre-configured)
- Optionally set OPENAI_API_KEY in values.yaml for chat functionality

To load images into Minikube:
  eval $(minikube docker-env)
  docker build -t todo-frontend:latest ./frontend
  docker build -t todo-backend:latest ./backend

Then deploy:
  helm install todo-chat ./todo-chat
  OR for upgrade: helm upgrade --install todo-chat ./todo-chat
