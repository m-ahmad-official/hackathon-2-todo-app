# Default values for todo-chat.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Global configuration
global:
  # Your Neon PostgreSQL database URL (external)
  databaseUrl: "postgresql://neondb_owner:npg_OobETvcr52mH@ep-purple-rain-ahogvd6j-pooler.c-3.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require"
  # OpenAI API key (optional - for chat functionality)
  openaiApiKey: ""
  openaiModel: "gpt-4"
  # JWT secrets (change these for production!)
  secretKey: "dev-secret-key-change-in-production-minimum-32-chars"
  betterAuthSecret: "dev-better-auth-secret-change-in-production-minimum-32-chars"
  betterAuthPublicKey: ""  # Leave empty for HS256
  jwtAlgorithm: "HS256"
  jwtExpirationDelta: 604800
  debug: "True"

# Application configuration
app:
  # Frontend configuration
  frontend:
    image:
      repository: todo-frontend
      tag: latest
      pullPolicy: IfNotPresent
    replicas: 1
    service:
      port: 3000
      targetPort: 3000
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
    # Liveness and readiness probes
    livenessProbe:
      httpGet:
        path: /
        port: 3000
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readinessProbe:
      httpGet:
        path: /
        port: 3000
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3

  # Backend configuration
  backend:
    image:
      repository: todo-backend
      tag: latest
      pullPolicy: IfNotPresent
    replicas: 1
    service:
      port: 8000
      targetPort: 8000
    resources:
      requests:
        memory: "256Mi"
        cpu: "200m"
      limits:
        memory: "512Mi"
        cpu: "400m"
    # Liveness and readiness probes
    livenessProbe:
      httpGet:
        path: /docs
        port: 8000
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readinessProbe:
      httpGet:
        path: /docs
        port: 8000
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3

# Service account configuration
serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

# Ingress configuration for local development (Minikube)
ingress:
  enabled: true
  className: "nginx"  # or "traefik" depending on your Minikube ingress controller
  annotations:
    # For nginx ingress controller
    kubernetes.io/ingress.class: nginx
    # Add additional annotations as needed for your setup
  hosts:
    - host: todo-chat.local  # Change this to your local domain
      paths:
        - path: /
          pathType: Prefix
          service:
            component: frontend
            port: 3000
        - path: /api
          pathType: Prefix
          service:
            component: backend
            port: 8000
  tls: []
    # For local development, you typically don't need TLS
    # - secretName: todo-chat-tls
    #   hosts:
    #     - todo-chat.local

# Resources (optional, can be overridden per component)
resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# Node selector, tolerations, affinity (optional)
nodeSelector: {}
tolerations: []
affinity: {}
